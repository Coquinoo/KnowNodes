form(name="form", novalidate, ng-submit="submit()")
    div.control-group(ng-class="{true:'error'}[submitted && form.selectedSuggestion.$invalid && form.knownodeRelation.title.$invalid && form.knownodeRelation.connectionType]")
        // Source Node
        // ... default direction
        div.resourcecontent.span11#content(ng-hide="reversedDirection", ng-show="rootNodeExists",style="padding:0px")
            accordion
                accordion-group(heading="{{concept.title}}", is-open='true')
                    div.knownode-body
                        p.bold(ng-show="concept.url")
                            a(ng-href="{{concept.url}}") {{concept.url}}
                        p(ng-show="concept.fileName") Download:
                            a(class="btn-info",href="/knownodeFiles/:{{concept.fileId}}", target="_blank", ng-show="concept.fileName") &nbsp;{{concept.fileName}}&nbsp;
                        div(ng-bind-html-unsafe="concept.bodyText")

        // ... reversed direction
        div.resourcecontent.span11#content(ng-show="reversedDirection && rootNodeExists")
            p
                search-box.knownode-title.target-resource-search-box(style="width:100%")
                span#content(ng-show="targetResourceTitle != null") {{targetResourceTitle}}
                span.help-inline(ng-show="submitted && form.selectedSuggestion.$error.required") you must choose a resource.

        // Connection between Nodes
        div(relation-input)

        // Destination Node
        // ... default direction
        // ....... existing node
        div.resourcecontent.span11#content(ng-hide="reversedDirection || userGenNode", ng-show="rootNodeExists")
            p
                search-box.knownode-title.target-resource-search-box(style="width:100%")
                span#content(ng-show="targetResourceTitle != null && !userGenNode") {{targetResourceTitle}}
                span.help-inline(ng-show="submitted && form.selectedSuggestion.$error.required") you must choose a resource.

        // ... reversed direction
        div.resourcecontent.span11#content(ng-show="reversedDirection", style="padding:0px")
            accordion
                accordion-group(heading="{{concept.title}}", is-open='true')
                    div.knownode-body
                        p.bold(ng-show="concept.url")
                            a(ng-href="{{concept.url}}") {{concept.url}}
                        p(ng-show="concept.fileName") Download:
                            a(class="btn-info",href="/knownodeFiles/:{{concept.fileId}}", target="_blank", ng-show="concept.fileName") &nbsp;{{concept.fileName}}&nbsp;
                        div(ng-bind-html-unsafe="concept.bodyText")

        // Submit button
        button.btn.btn-primary.btn-large#content(type="submit", ng-disabled="submitted") Submit
        span(ng-show="submitErrorMessage") {{submitErrorMessage}}